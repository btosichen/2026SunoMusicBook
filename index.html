<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¹ªæœ¬éŸ³æ¨‚é­”æ³•å¸«ï¼šSuno æ•™å­¸äº’å‹• App</title>
    
    <!-- 1. å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. å¼•å…¥ Babel (é–å®šç‰ˆæœ¬ä»¥ç¢ºä¿ç©©å®šæ€§) -->
    <script src="https://unpkg.com/@babel/standalone@7.24.7/babel.min.js"></script>

    <!-- 3. è¨­å®š Import Map (å‘Šè¨´ç€è¦½å™¨å»å“ªè£¡æŠ“ React å’Œåœ–ç¤ºåº«) -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.263.1"
        }
    }
    </script>

    <!-- è‡ªè¨‚ä¸€äº› CSS å‹•ç•« -->
    <style>
        /* éš±è—æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ (ç¾è§€ç”¨) */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slideUp {
            animation: slideUp 0.5s ease-out forwards;
        }
        
        body {
            font-family: system-ui, -apple-system, sans-serif;
        }
    </style>
</head>
<body class="bg-orange-50 selection:bg-yellow-200 selection:text-orange-900">
    
    <!-- React æ‡‰ç”¨ç¨‹å¼çš„æ›è¼‰é» -->
    <div id="root"></div>

    <!-- React ç¨‹å¼ç¢¼é‚è¼¯ -->
    <!-- ä¿®æ­£é‡é»ï¼šç§»é™¤ 'env' presetï¼Œåªä¿ç•™ 'react'ï¼Œé¿å…å°‡ import è½‰è­¯ç‚º require -->
    <script type="text/babel" data-type="module" data-presets="react">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            BookOpen, Music, Mic, Sun, Smile, Play, CheckCircle, 
            Edit3, Heart, Star, Copy, ArrowRight, ArrowLeft, 
            Sparkles, Info, X, FileText 
        } from 'lucide-react';

        const SunoMusicBook = () => {
            const [step, setStep] = useState(0);
            const [showTips, setShowTips] = useState(false); // æ§åˆ¶é€²éšæŠ€å·§è¦–çª—
            const [formData, setFormData] = useState({
                protagonist: '',
                theme: '',
                lyric1_action: '',
                lyric2_fear: '',
                lyric3_try: '',
                style_use: 'å…’ç«¥æœ‰è²ç¹ªæœ¬',
                style_emotion: '',
                style_tempo: '',
                style_voice: '',
                rating: 0,
                reflection: ''
            });

            const [generatedPrompt, setGeneratedPrompt] = useState('');
            const [isCopied, setIsCopied] = useState(false);
            const [isTemplateCopied, setIsTemplateCopied] = useState(false);

            // é è¨­é¸é …è³‡æ–™
            const themes = ['å‹‡æ•¢', 'å˜—è©¦', 'ä¸å®³æ€•', 'ä¸€èµ·å®Œæˆ', 'å‹èª¼', 'åˆ†äº«'];
            const emotions = [
                { label: 'æº«æš–', icon: <Sun size={24} />, color: 'bg-yellow-400' },
                { label: 'å……æ»¿å¸Œæœ›', icon: <Sparkles size={24} />, color: 'bg-sky-400' },
                { label: 'å‹‡æ•¢å†’éšª', icon: <div className="text-2xl">ğŸ¾</div>, color: 'bg-orange-400' }
            ];
            const tempos = [
                { label: 'æ…¢æ…¢èµ° (90 BPM)', desc: 'åƒæ•£æ­¥ä¸€æ¨£', icon: <div className="text-2xl">ğŸš¶</div> },
                { label: 'è¼•å¿«å°è·‘ (110 BPM)', desc: 'é–‹å¿ƒçš„æ„Ÿè¦º', icon: <div className="text-2xl">ğŸƒ</div> }
            ];
            const voices = [
                { label: 'æº«æŸ”å¥³è²', desc: 'åƒåª½åª½èªªæ•…äº‹', icon: <Mic size={24} /> },
                { label: 'æº«æŸ”ç”·è²', desc: 'åƒçˆ¸çˆ¸èªªæ•…äº‹', icon: <Mic size={24} /> },
                { label: 'æ´»æ½‘ç«¥è²', desc: 'åƒå°æœ‹å‹å”±æ­Œ', icon: <Smile size={24} /> }
            ];

            // é€²éšæ¨¡ç‰ˆå…§å®¹
            const advancedTemplate = `Style: [æ•´é«”é¢¨æ ¼ï¼Œä¾‹å¦‚ Emotional Mandarin Ballad, 88-92 BPM, A minor]  
Mood: [æ°›åœæè¿°ï¼Œä¾‹å¦‚ melancholic, reflective, intimate, sentimental]  
Vocal: [æ­Œæ‰‹éŸ³è‰²ï¼Œä¾‹å¦‚ husky female solo, mid-low register, warm tone]  
Instruments: [ä¸»è¦æ¨‚å™¨ï¼Œä¾‹å¦‚ soft piano, gentle strings, acoustic guitar, brush drums]  

[Verse 1 â€“ (æ­Œæ‰‹éŸ³è‰²ã€éŸ³åŸŸã€å”±æ³•ã€ä¼´å¥ç·¨æ’)]  
(åœ¨é€™è£¡æ”¾ Verse 1 çš„æ­Œè©)

[Pre-Chorus â€“ (æ­Œæ‰‹éŸ³è‰²ã€æƒ…ç·’èµ°å‘ã€ä¼´å¥ç·¨æ’)]  
(åœ¨é€™è£¡æ”¾ Pre-Chorus çš„æ­Œè©)

[Chorus â€“ (æ­Œæ‰‹éŸ³è‰²ã€å”±è…”å¼·åº¦ã€ä¼´å¥å±¤æ¬¡)]  
(åœ¨é€™è£¡æ”¾ Chorus çš„æ­Œè©)

[Verse 2 â€“ (æ­Œæ‰‹éŸ³è‰²ã€éŸ³åŸŸã€å”±æ³•ã€ä¼´å¥ç·¨æ’)]  
(åœ¨é€™è£¡æ”¾ Verse 2 çš„æ­Œè©)

[Pre-Chorus â€“ (æ­Œæ‰‹éŸ³è‰²ã€æƒ…ç·’èµ°å‘ã€ä¼´å¥ç·¨æ’)]  
(åœ¨é€™è£¡æ”¾ Pre-Chorus çš„æ­Œè©)

[Chorus â€“ (æ­Œæ‰‹éŸ³è‰²ã€å”±è…”å¼·åº¦ã€ä¼´å¥å±¤æ¬¡)]  
(åœ¨é€™è£¡æ”¾ Chorus çš„æ­Œè©)

[Bridge â€“ (æ­Œæ‰‹éŸ³è‰²ã€æƒ…æ„Ÿå¼µåŠ›ã€ä¼´å¥å¼·åº¦)]  
(åœ¨é€™è£¡æ”¾ Bridge çš„æ­Œè©)

[Chorus â€“ (æ­Œæ‰‹éŸ³è‰²ã€å”±è…”å¼·åº¦ã€ä¼´å¥å±¤æ¬¡)]  
(åœ¨é€™è£¡æ”¾é‡è¤‡ Chorus çš„æ­Œè©)

[Outro â€“ (æ­Œæ‰‹éŸ³è‰²ã€æ°›åœã€æ”¶å°¾ä¼´å¥æ–¹å¼)]  
(åœ¨é€™è£¡æ”¾ Outro çš„æ­Œè©)`;

            // çµ„åˆæœ€çµ‚æç¤ºè©
            useEffect(() => {
                if (step === 4) {
                const prompt = `
[Style Description]
Genre: Children's Music, Acoustic Folk
Mood: ${formData.style_emotion}
Tempo: ${formData.style_tempo.split('(')[0]}
Vocals: ${formData.style_voice}, Warm, Clear
Instruments: Acoustic Guitar, Light Percussion

[Lyrics]
(Verse 1)
æˆ‘æ˜¯ ${formData.protagonist || 'ä¸»è§’'}
æˆ‘å¯ä»¥ ${formData.lyric1_action || 'åšäº›ä»€éº¼'}
é›–ç„¶æœ‰æ™‚å€™æœƒå®³æ€• ${formData.lyric2_fear || 'å›°é›£'}
ä½†æˆ‘é¡˜æ„è©¦è©¦çœ‹ ${formData.lyric3_try || 'æŒ‘æˆ°'}

(Chorus)
é€™æ˜¯ä¸€å€‹é—œæ–¼ ${formData.theme} çš„æ•…äº‹
æˆ‘å€‘ä¸€èµ·å¤§æ­¥å‘å‰èµ°
`.trim();
                setGeneratedPrompt(prompt);
                }
            }, [step, formData]);

            const handleNext = () => setStep((prev) => Math.min(prev + 1, 5));
            const handleBack = () => setStep((prev) => Math.max(prev - 1, 0));

            const updateForm = (key, value) => {
                setFormData((prev) => ({ ...prev, [key]: value }));
            };

            const copyText = (text, setCopiedState) => {
                // ä½¿ç”¨ execCommand ä»¥ç¢ºä¿åœ¨ iframe ç’°å¢ƒä¸‹ä¹Ÿèƒ½æ­£å¸¸è¤‡è£½
                const textArea = document.createElement("textarea");
                textArea.value = text;
                
                // é¿å…ç•«é¢è·³å‹•
                textArea.style.position = "fixed";
                textArea.style.left = "-9999px";
                textArea.style.top = "0";
                
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                
                try {
                const successful = document.execCommand('copy');
                if (successful) {
                    setCopiedState(true);
                    setTimeout(() => setCopiedState(false), 2000);
                }
                } catch (err) {
                console.error('è¤‡è£½å¤±æ•—:', err);
                }
                
                document.body.removeChild(textArea);
            };

            // å…ƒä»¶ï¼šAI å°æé†’å¡ç‰‡
            const AiTipCard = ({ title, text, color = "bg-purple-100" }) => (
                <div className={`mt-6 p-4 rounded-2xl border-l-8 border-purple-500 ${color} shadow-sm flex items-start gap-3`}>
                <div className="bg-white p-2 rounded-full shadow-sm text-purple-600 shrink-0">
                    <Sparkles size={20} />
                </div>
                <div>
                    <h4 className="font-bold text-purple-900 text-sm mb-1">âœ¨ {title}</h4>
                    <p className="text-purple-800 text-sm">{text}</p>
                </div>
                </div>
            );

            // å…ƒä»¶ï¼šé€²åº¦æ¢
            const ProgressBar = () => (
                <div className="flex justify-between items-center mb-8 px-2">
                {[1, 2, 3, 4, 5].map((num) => (
                    <div key={num} className="flex flex-col items-center relative">
                    <div 
                        className={`w-10 h-10 rounded-full flex items-center justify-center font-black text-lg border-4 transition-all duration-300 z-10
                        ${step >= num ? 'bg-yellow-400 border-orange-500 text-orange-900 scale-110 shadow-lg' : 'bg-white border-gray-200 text-gray-300'}`}
                    >
                        {num}
                    </div>
                    {num < 5 && (
                        <div className={`absolute left-10 top-1/2 -translate-y-1/2 w-[calc(100vw/6)] h-2 transition-all duration-500
                        ${step > num ? 'bg-yellow-400' : 'bg-gray-100'}`} 
                        />
                    )}
                    </div>
                ))}
                </div>
            );

            // æ­¥é©Ÿå…§å®¹æ¸²æŸ“
            const renderStep = () => {
                switch (step) {
                case 0: // æ­¡è¿é 
                    return (
                    <div className="text-center py-10 flex flex-col items-center animate-fadeIn">
                        <div className="w-32 h-32 bg-yellow-300 rounded-full flex items-center justify-center mb-6 border-4 border-orange-400 shadow-[6px_6px_0px_rgba(251,146,60,0.5)] transform -rotate-3">
                        <Music size={64} className="text-orange-600" />
                        </div>
                        <h1 className="text-4xl font-black text-indigo-900 mb-4 tracking-wide">
                        ç¹ªæœ¬éŸ³æ¨‚é­”æ³•å¸«
                        </h1>
                        <p className="text-xl text-indigo-600 font-bold mb-8">
                        ç”¨ AI å¹«ä½ çš„æ•…äº‹åšä¸€é¦–ä¸»é¡Œæ›²ï¼
                        </p>
                        
                        <div className="bg-white p-6 rounded-3xl shadow-xl border-4 border-indigo-100 max-w-md mx-auto transform rotate-1 mb-8">
                        <p className="text-lg font-bold text-indigo-800 leading-relaxed">
                            ã€Œæ•…äº‹æ˜¯ä½ æƒ³çš„ï¼Œ<br/>éŸ³æ¨‚æ˜¯ä½ é¸çš„ï¼Œ<br/>AI åªæ˜¯å¹«ä½ å®Œæˆã€‚ã€
                        </p>
                        </div>

                        <button 
                        onClick={handleNext}
                        className="group bg-green-500 hover:bg-green-400 text-white text-2xl font-black py-4 px-12 rounded-full shadow-[0_6px_0_rgb(21,128,61)] active:shadow-[0_2px_0_rgb(21,128,61)] active:translate-y-1 transition-all flex items-center gap-3"
                        >
                        é–‹å§‹å†’éšª <ArrowRight size={28} className="group-hover:translate-x-1 transition-transform"/>
                        </button>
                    </div>
                    );

                case 1: // Step 1: æ•…äº‹æ§‹æƒ³
                    return (
                    <div className="animate-slideUp">
                        <h2 className="text-3xl font-black text-indigo-900 mb-6 flex items-center gap-3">
                        <span className="bg-orange-400 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl">1</span>
                        æ•…äº‹åœ¨èªªä»€éº¼ï¼Ÿ
                        </h2>
                        
                        <div className="bg-white p-6 rounded-3xl border-4 border-orange-200 shadow-lg space-y-6">
                        <div>
                            <label className="block text-indigo-800 font-bold mb-2 text-lg">æˆ‘çš„ç¹ªæœ¬ä¸»è§’æ˜¯ï¼š</label>
                            <input 
                            type="text" 
                            value={formData.protagonist}
                            onChange={(e) => updateForm('protagonist', e.target.value)}
                            placeholder="ä¾‹å¦‚ï¼šå‹‡æ•¢çš„å°ç†Šã€è¿·è·¯çš„æ˜Ÿæ˜Ÿ..."
                            className="w-full p-4 text-lg bg-orange-50 border-2 border-orange-300 rounded-xl focus:outline-none focus:border-orange-500 text-indigo-900 placeholder-orange-300"
                            />
                        </div>

                        <div>
                            <label className="block text-indigo-800 font-bold mb-3 text-lg">é€™å€‹æ•…äº‹æƒ³å‘Šè¨´å¤§å®¶ï¼š</label>
                            <div className="grid grid-cols-2 gap-3">
                            {themes.map(theme => (
                                <button
                                key={theme}
                                onClick={() => updateForm('theme', theme)}
                                className={`p-3 rounded-xl border-2 font-bold transition-all text-left flex items-center gap-2
                                    ${formData.theme === theme 
                                    ? 'bg-yellow-100 border-orange-500 text-orange-700 shadow-md transform scale-105' 
                                    : 'bg-white border-gray-200 text-gray-500 hover:border-orange-300'}`}
                                >
                                <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${formData.theme === theme ? 'border-orange-500' : 'border-gray-300'}`}>
                                    {formData.theme === theme && <div className="w-3 h-3 bg-orange-500 rounded-full" />}
                                </div>
                                {theme}
                                </button>
                            ))}
                            </div>
                        </div>
                        </div>

                        <AiTipCard 
                        title="é‡é»è§€å¿µ" 
                        text="AI ä¸æœƒå¹«ä½ æƒ³æ•…äº‹ï¼Œæ•…äº‹è¦å…ˆåœ¨ä½ å¿ƒè£¡ã€‚ä½ æ˜¯å°æ¼”ï¼ŒAI æ˜¯ä½ çš„æ”å½±å¸«ã€‚" 
                        />
                    </div>
                    );

                case 2: // Step 2: æ­Œè©æ•´ç†
                    return (
                    <div className="animate-slideUp">
                        <h2 className="text-3xl font-black text-indigo-900 mb-6 flex items-center gap-3">
                        <span className="bg-green-400 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl">2</span>
                        æŠŠæ•…äº‹è®Šæ­Œè©
                        </h2>

                        <div className="bg-white p-6 rounded-3xl border-4 border-green-200 shadow-lg space-y-4">
                        <p className="text-indigo-600 font-bold mb-2">è«‹å®Œæˆé€™ä¸‰å¥æœ€é‡è¦çš„è©±ï¼š</p>
                        
                        <div className="space-y-4">
                            <div className="flex flex-col sm:flex-row sm:items-center gap-2 bg-green-50 p-3 rounded-xl border border-green-200">
                            <span className="font-bold text-green-800 text-lg whitespace-nowrap">æˆ‘å¯ä»¥</span>
                            <input 
                                type="text" 
                                value={formData.lyric1_action}
                                onChange={(e) => updateForm('lyric1_action', e.target.value)}
                                placeholder="é£›éé«˜å±± / å¹«åŠ©æœ‹å‹..."
                                className="flex-1 p-2 bg-white rounded-lg border-2 border-green-300 focus:border-green-500 focus:outline-none"
                            />
                            </div>

                            <div className="flex flex-col sm:flex-row sm:items-center gap-2 bg-green-50 p-3 rounded-xl border border-green-200">
                            <span className="font-bold text-green-800 text-lg whitespace-nowrap">æˆ‘ä¸å®³æ€•</span>
                            <input 
                                type="text" 
                                value={formData.lyric2_fear}
                                onChange={(e) => updateForm('lyric2_fear', e.target.value)}
                                placeholder="é»‘æš— / å¤±æ•— / ä¸€å€‹äºº..."
                                className="flex-1 p-2 bg-white rounded-lg border-2 border-green-300 focus:border-green-500 focus:outline-none"
                            />
                            </div>

                            <div className="flex flex-col sm:flex-row sm:items-center gap-2 bg-green-50 p-3 rounded-xl border border-green-200">
                            <span className="font-bold text-green-800 text-lg whitespace-nowrap">æˆ‘é¡˜æ„è©¦è©¦çœ‹</span>
                            <input 
                                type="text" 
                                value={formData.lyric3_try}
                                onChange={(e) => updateForm('lyric3_try', e.target.value)}
                                placeholder="æ‰“é–‹å¤§é–€ / èªªè²å—¨..."
                                className="flex-1 p-2 bg-white rounded-lg border-2 border-green-300 focus:border-green-500 focus:outline-none"
                            />
                            </div>
                        </div>
                        </div>

                        <AiTipCard 
                        title="é‡é»è§€å¿µ" 
                        text="æ­Œè©æ˜¯æ•…äº‹çš„ã€Œç²¾è¯ç‰ˆã€ã€‚ä¸ç”¨æŠŠæ•´æœ¬ç¹ªæœ¬å¯«é€²å»ï¼Œåªè¦å¯«å‡ºæœ€é‡è¦çš„æ„Ÿè¦ºï¼"
                        color="bg-green-100 border-green-500 text-green-900" 
                        />
                    </div>
                    );

                case 3: // Step 3: é¢¨æ ¼è¨­å®š
                    return (
                    <div className="animate-slideUp">
                        <h2 className="text-3xl font-black text-indigo-900 mb-6 flex items-center gap-3">
                        <span className="bg-sky-400 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl">3</span>
                        æ±ºå®šéŸ³æ¨‚é¢¨æ ¼
                        </h2>

                        <div className="space-y-6">
                        {/* æƒ…ç·’ */}
                        <div className="bg-white p-4 rounded-2xl border-4 border-sky-100">
                            <h3 className="text-lg font-bold text-indigo-800 mb-3 flex items-center gap-2"><Heart className="text-pink-500"/> è½èµ·ä¾†çš„æ„Ÿè¦º...</h3>
                            <div className="grid grid-cols-3 gap-3">
                            {emotions.map(emotion => (
                                <button
                                key={emotion.label}
                                onClick={() => updateForm('style_emotion', emotion.label)}
                                className={`p-3 rounded-xl flex flex-col items-center gap-2 transition-all
                                    ${formData.style_emotion === emotion.label 
                                    ? `${emotion.color} text-white shadow-lg transform scale-105` 
                                    : 'bg-gray-50 text-gray-500 hover:bg-gray-100'}`}
                                >
                                {emotion.icon}
                                <span className="font-bold text-sm">{emotion.label}</span>
                                </button>
                            ))}
                            </div>
                        </div>

                        {/* ç¯€å¥èˆ‡è²éŸ³ */}
                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div className="bg-white p-4 rounded-2xl border-4 border-sky-100">
                            <h3 className="text-lg font-bold text-indigo-800 mb-3 flex items-center gap-2"><div className="text-xl">ğŸ¥</div> é€Ÿåº¦</h3>
                            <div className="space-y-2">
                                {tempos.map(tempo => (
                                <button
                                    key={tempo.label}
                                    onClick={() => updateForm('style_tempo', tempo.label)}
                                    className={`w-full p-2 rounded-lg text-left flex items-center gap-2 border-2 transition-all
                                    ${formData.style_tempo === tempo.label ? 'border-sky-400 bg-sky-50 text-sky-800' : 'border-transparent hover:bg-gray-50'}`}
                                >
                                    {tempo.icon} <span className="text-sm font-bold">{tempo.label}</span>
                                </button>
                                ))}
                            </div>
                            </div>

                            <div className="bg-white p-4 rounded-2xl border-4 border-sky-100">
                            <h3 className="text-lg font-bold text-indigo-800 mb-3 flex items-center gap-2"><Mic className="text-purple-500"/> è²éŸ³</h3>
                            <div className="space-y-2">
                                {voices.map(voice => (
                                <button
                                    key={voice.label}
                                    onClick={() => updateForm('style_voice', voice.label)}
                                    className={`w-full p-2 rounded-lg text-left flex items-center gap-2 border-2 transition-all
                                    ${formData.style_voice === voice.label ? 'border-sky-400 bg-sky-50 text-sky-800' : 'border-transparent hover:bg-gray-50'}`}
                                >
                                    <span className="text-sky-500">{voice.icon}</span> <span className="text-sm font-bold">{voice.label}</span>
                                </button>
                                ))}
                            </div>
                            </div>
                        </div>
                        </div>

                        <AiTipCard 
                        title="é‡é»è§€å¿µ" 
                        text="ä½ åœ¨ã€Œå‘Šè¨´ AI æ€éº¼å¹«ä½ ã€ï¼ŒæŒ‡ä»¤è¶Šæ¸…æ¥šï¼ŒAI å°±ä¸æœƒäº‚çŒœå–”ï¼"
                        color="bg-sky-100 border-sky-500 text-sky-900" 
                        />
                    </div>
                    );

                case 4: // Step 4: ç”¢ç”Ÿ
                    return (
                    <div className="animate-slideUp">
                        <h2 className="text-3xl font-black text-indigo-900 mb-4 flex items-center gap-3">
                        <span className="bg-pink-400 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl">4</span>
                        è®Šå‡ºé­”æ³•å’’èª
                        </h2>

                        <div className="bg-indigo-900 p-6 rounded-3xl shadow-xl relative overflow-hidden group mb-4">
                        <div className="absolute top-0 right-0 w-32 h-32 bg-white opacity-5 rounded-full -translate-y-1/2 translate-x-1/2" />
                        
                        <h3 className="text-white font-bold mb-2 flex items-center gap-2">
                            <Sparkles className="text-yellow-300" /> é€™æ˜¯ä½ çš„ Suno æç¤ºè©
                        </h3>
                        
                        <div className="bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 font-mono text-sm text-indigo-100 mb-4 whitespace-pre-wrap h-48 overflow-y-auto custom-scrollbar">
                            {generatedPrompt}
                        </div>

                        <div className="flex flex-col sm:flex-row gap-3">
                            <button 
                            onClick={() => copyText(generatedPrompt, setIsCopied)}
                            className="flex-1 bg-yellow-400 hover:bg-yellow-300 text-indigo-900 font-bold py-3 px-6 rounded-xl shadow-[0_4px_0_rgb(202,138,4)] active:shadow-none active:translate-y-1 transition-all flex items-center justify-center gap-2"
                            >
                            {isCopied ? <CheckCircle size={20}/> : <Copy size={20}/>}
                            {isCopied ? 'è¤‡è£½æˆåŠŸï¼' : 'è¤‡è£½å’’èª (æç¤ºè©)'}
                            </button>
                            
                            <a 
                            href="https://suno.com" 
                            target="_blank" 
                            rel="noopener noreferrer"
                            className="flex-1 bg-white hover:bg-gray-50 text-indigo-900 font-bold py-3 px-6 rounded-xl shadow-[0_4px_0_rgb(203,213,225)] active:shadow-none active:translate-y-1 transition-all flex items-center justify-center gap-2 border-2 border-indigo-100"
                            >
                            å‰å¾€ Suno <ArrowRight size={20}/>
                            </a>
                        </div>
                        </div>

                        {/* é€²éšæŠ€å·§æŒ‰éˆ• */}
                        <button 
                        onClick={() => setShowTips(true)}
                        className="w-full bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-bold py-3 px-4 rounded-xl flex items-center justify-center gap-2 transition-colors border-2 border-indigo-200 dashed"
                        >
                        <Info size={20} />
                        ä¸æƒ³åªç”¨ç°¡å–®ç‰ˆï¼Ÿé»æˆ‘çœ‹ã€Œé€²éšç§˜ç±ã€
                        </button>

                        <AiTipCard 
                        title="é‡é»è§€å¿µ" 
                        text="AI æ˜¯å‰µä½œå¤¥ä¼´ï¼Œä¸æ˜¯ä»£å‹è€…ã€‚è¤‡è£½å‰å…ˆæª¢æŸ¥ä¸€ä¸‹ï¼Œé€™æ˜¯ä½ æƒ³è¦çš„æ„æ€å—ï¼Ÿ"
                        color="bg-pink-100 border-pink-500 text-pink-900" 
                        />
                    </div>
                    );

                case 5: // Step 5: åæ€
                    return (
                    <div className="animate-slideUp">
                        <h2 className="text-3xl font-black text-indigo-900 mb-6 flex items-center gap-3">
                        <span className="bg-yellow-400 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl">5</span>
                        è½è½çœ‹èˆ‡å›é¥‹
                        </h2>

                        <div className="bg-white p-6 rounded-3xl border-4 border-yellow-200 shadow-lg text-center">
                        <h3 className="text-xl font-bold text-indigo-800 mb-4">é€™é¦–æ­Œåšå‡ºä¾†çš„æ„Ÿè¦ºæ€éº¼æ¨£ï¼Ÿ</h3>
                        
                        <div className="flex justify-center gap-2 mb-6">
                            {[1, 2, 3, 4, 5].map((star) => (
                            <button 
                                key={star}
                                onClick={() => updateForm('rating', star)}
                                className="transform hover:scale-110 transition-transform focus:outline-none"
                            >
                                <Star 
                                size={40} 
                                className={star <= formData.rating ? "text-yellow-400 fill-current" : "text-gray-200"}
                                />
                            </button>
                            ))}
                        </div>

                        <div className="text-left bg-yellow-50 p-4 rounded-xl border-2 border-yellow-100 mb-4">
                            <label className="block text-indigo-800 font-bold mb-2">æˆ‘æƒ³èª¿æ•´çš„åœ°æ–¹æ˜¯...</label>
                            <textarea 
                            value={formData.reflection}
                            onChange={(e) => updateForm('reflection', e.target.value)}
                            placeholder="ä¾‹å¦‚ï¼šå¸Œæœ›èƒ½æ›´è¼•å¿«ä¸€é»ã€æ­Œè©æƒ³è¦æ”¹ä¸€å¥..."
                            className="w-full p-3 bg-white rounded-lg border-2 border-yellow-200 focus:border-yellow-400 focus:outline-none h-24 resize-none"
                            />
                        </div>
                        
                        <div className="flex gap-2 justify-center">
                            <span className="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold">#å¾ˆåƒæ•…äº‹</span>
                            <span className="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-bold">#å¾ˆæº«æš–</span>
                            <span className="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-bold">#é‚„å¯ä»¥å†æ”¹</span>
                        </div>
                        </div>

                        <AiTipCard 
                        title="é‡é»è§€å¿µ" 
                        text="å‰µä½œå¯ä»¥åè¦†ä¿®æ­£ï¼ŒAI ä¹Ÿè¦è¢«ã€Œæ•™ã€ã€‚è¦ºå¾—ä¸å¥½è½æ²’é—œä¿‚ï¼Œèª¿æ•´æŒ‡ä»¤å†è©¦ä¸€æ¬¡ï¼"
                        color="bg-yellow-100 border-yellow-500 text-yellow-900" 
                        />

                        <div className="mt-8 text-center">
                            <button 
                            onClick={() => setStep(0)}
                            className="text-indigo-400 font-bold hover:text-indigo-600 underline"
                            >
                            å†åšä¸€é¦–æ–°æ­Œ
                            </button>
                        </div>
                    </div>
                    );
                default:
                    return null;
                }
            };

            return (
                <div className="min-h-screen bg-orange-50 font-sans selection:bg-yellow-200 selection:text-orange-900 pb-12 relative">
                {/* é ‚éƒ¨è£é£¾ */}
                <div className="h-4 bg-gradient-to-r from-green-400 via-yellow-400 to-orange-400"></div>
                
                <div className="max-w-2xl mx-auto px-4 py-8">
                    {step > 0 && <ProgressBar />}

                    {/* ä¸»å…§å®¹å€å¡Š */}
                    <div className="relative">
                    {renderStep()}
                    </div>

                    {/* åº•éƒ¨å°èˆª */}
                    {step > 0 && (
                    <div className="flex justify-between mt-8 animate-fadeIn">
                        <button 
                        onClick={handleBack}
                        className="px-6 py-3 rounded-xl font-bold text-gray-500 hover:bg-gray-200 transition-colors flex items-center gap-2"
                        >
                        <ArrowLeft size={20}/> ä¸Šä¸€æ­¥
                        </button>
                        
                        {step < 5 ? (
                        <button 
                            onClick={handleNext}
                            className="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-8 rounded-xl shadow-[0_4px_0_rgb(55,48,163)] active:shadow-none active:translate-y-1 transition-all flex items-center gap-2"
                        >
                            ä¸‹ä¸€æ­¥ <ArrowRight size={20}/>
                        </button>
                        ) : (
                        <div />
                        )}
                    </div>
                    )}
                </div>

                {/* åº•éƒ¨ç‰ˆæ¬Š */}
                <div className="text-center text-indigo-200 text-sm mt-12 font-bold">
                    Â© 2024 å…’ç«¥ç¹ªæœ¬éŸ³æ¨‚å·¥ä½œåŠ
                </div>

                {/* é€²éšæŠ€å·§ Modal */}
                {showTips && (
                    <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fadeIn">
                    <div className="bg-white rounded-3xl w-full max-w-2xl max-h-[90vh] shadow-2xl flex flex-col overflow-hidden">
                        {/* Header */}
                        <div className="bg-gradient-to-r from-indigo-600 to-purple-600 p-4 flex justify-between items-center shrink-0">
                        <h3 className="text-white font-bold text-lg flex items-center gap-2">
                            <FileText className="text-yellow-300" /> ä½¿ç”¨ Suno AI ç”ŸæˆéŸ³æ¨‚å°æŠ€å·§
                        </h3>
                        <button onClick={() => setShowTips(false)} className="text-white/80 hover:text-white hover:bg-white/20 rounded-full p-1 transition-colors">
                            <X size={24} />
                        </button>
                        </div>
                        
                        {/* Content */}
                        <div className="p-6 overflow-y-auto custom-scrollbar">
                        <div className="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-r-xl">
                            <p className="text-blue-900 font-bold">è¦ºå¾—é€™æ¨£æ¯”è¼ƒå¥½è½ï¼Ÿ</p>
                            <p className="text-blue-800 text-sm mt-1">
                            å¯ä»¥è«‹ ChatGPT å¹«ä½ è¨­è¨ˆï¼å°‡ä¸‹é¢çš„æŒ‡ä»¤åˆ†æˆä¸‰å€‹æ­¥é©Ÿå‘Šè¨´å®ƒï¼š
                            </p>
                        </div>

                        <div className="space-y-6 text-gray-700">
                            <div>
                            <h4 className="font-bold text-indigo-700 mb-2 flex items-center gap-2">
                                <span className="bg-indigo-100 w-6 h-6 rounded-full flex items-center justify-center text-xs">1</span>
                                çµæ§‹åˆ†æ®µ
                            </h4>
                            <p className="bg-gray-50 p-3 rounded-lg text-sm border border-gray-200">
                                ã€Œå¹«æˆ‘æŠŠé€™é¦–æ­Œçš„æ­Œè©ï¼Œåˆ†æˆ [Intro] [Verse 1] [Pre-Chorus] [Chorus] [Verse 2] [Bridge] [Outro] ä¸ƒå€‹æ®µè½ä¾†è¨­è¨ˆã€‚ã€
                            </p>
                            </div>

                            <div>
                            <h4 className="font-bold text-indigo-700 mb-2 flex items-center gap-2">
                                <span className="bg-indigo-100 w-6 h-6 rounded-full flex items-center justify-center text-xs">2</span>
                                é¢¨æ ¼è¨­å®š
                            </h4>
                            <p className="bg-gray-50 p-3 rounded-lg text-sm border border-gray-200">
                                ã€Œæ¯å€‹æ®µè½å¾Œé¢åŠ ä¸Šæ¼”å”±é¢¨æ ¼èªªæ˜ï¼Œæ¯”å¦‚æ­Œæ‰‹éŸ³è‰²ã€å”±æ³•ã€æ°›åœã€‚é¢¨æ ¼å¯ä»¥èåˆ EDMã€æŠ’æƒ…ã€R&Bã€æœªä¾†æ„Ÿã€‚ã€
                            </p>
                            </div>

                            <div>
                            <h4 className="font-bold text-indigo-700 mb-2 flex items-center gap-2">
                                <span className="bg-indigo-100 w-6 h-6 rounded-full flex items-center justify-center text-xs">3</span>
                                å¥—ç”¨æ¨¡ç‰ˆ (é‡é»ï¼)
                            </h4>
                            <p className="text-sm mb-2">è«‹ ChatGPT ä¾ç…§é€™å€‹æ ¼å¼æ•´ç†çµ¦ä½ ï¼Œç„¶å¾Œä½ å†è²¼å» Sunoï¼š</p>
                            
                            <div className="relative group">
                                <pre className="bg-gray-800 text-gray-100 p-4 rounded-xl text-xs font-mono whitespace-pre-wrap leading-relaxed">
                                {advancedTemplate}
                                </pre>
                                <button 
                                onClick={() => copyText(advancedTemplate, setIsTemplateCopied)}
                                className="absolute top-2 right-2 bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg text-xs font-bold backdrop-blur-md transition-colors flex items-center gap-1"
                                >
                                {isTemplateCopied ? <CheckCircle size={14}/> : <Copy size={14}/>}
                                {isTemplateCopied ? 'å·²è¤‡è£½' : 'ä¸€éµè¤‡è£½æ¨¡ç‰ˆ'}
                                </button>
                            </div>
                            </div>
                        </div>
                        </div>

                        {/* Footer */}
                        <div className="p-4 border-t border-gray-100 bg-gray-50 flex justify-end shrink-0">
                        <button 
                            onClick={() => setShowTips(false)}
                            className="bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-6 rounded-xl transition-colors"
                        >
                            é—œé–‰
                        </button>
                        </div>
                    </div>
                    </div>
                )}
                </div>
            );
        };

        // å•Ÿå‹• React App
        const root = createRoot(document.getElementById('root'));
        root.render(<SunoMusicBook />);
    </script>
</body>
</html>
